var FxpTableSelect=function(e,u){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}u=u&&u.hasOwnProperty("default")?u.default:u;var i={},s=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};l(this,n),this.guid=u.guid,this.options=u.extend(!0,{},this.constructor.defaultOptions,t),this.$element=u(e)}return t(n,[{key:"destroy",value:function(){var t=this;Object.keys(t).forEach(function(e){delete t[e]})}}],[{key:"defaultOptions",set:function(e){i[this.name]=u.extend(!0,{},i[this.name],e)},get:function(){return void 0===i[this.name]&&(i[this.name]={}),i[this.name]}}]),n}();function h(e){$(e.target).is(":checked")?e.data.all():e.data.clean()}function p(e){var t=$(e.target),n=t.parents("tr:first").attr("data-row-id");t.is(":checked")?e.data.add(n):e.data.remove(n)}function d(e){e.data.clear()}function y(e){e.data.refresh()}var b=function(e){function i(e){var t,n,o,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return l(this,i),n=this,(t=!(o=a(i).call(this,e,r))||"object"!=typeof o&&"function"!=typeof o?c(n):o).$wrapper=u("[data-table-id="+t.$element.attr("id")+"]"),t.$count=u(t.options.countSelector,t.$wrapper),t.items=[],t.multiple=!1,t.allSelector=t.options.allSelector.replace("%COL_NAME%",t.options.colSelectable),t.rowSelector=t.options.rowSelector.replace("%COL_NAME%",t.options.colSelectable),t.setMaxSelection(t.options.maxSelection),0<t.$element.find(t.allSelector).length&&(t.multiple=!0),t.$element.on("change.fxp.tableselect",t.allSelector,c(t),h).on("change.fxp.tableselect",t.rowSelector,c(t),p).on("table-pager-refreshed.fxp.tableselect",null,c(t),y),t.$wrapper.on("click.fxp.tableselect",t.options.clearSelector,c(t),d),t.refresh(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(i,s),t(i,[{key:"has",value:function(e){return 0<=u.inArray(e,this.items)}},{key:"add",value:function(e){var t,n,o;for("string"==typeof e&&(e=[e]),o=0;o<e.length;o+=1){if(t=e[o],!this.multiple){this.items=[t];break}if(0<this.getMaxSelection()&&this.count()>=this.maxSelection){n=u.Event("table-select-max-selection",{tableSelect:this}),this.$element.trigger(n);break}this.has(t)||this.items.push(t)}this.items.sort(function(e,t){return e-t}),this.refresh()}},{key:"remove",value:function(e){var t,n,o;for("string"==typeof e&&(e=[e]),o=0;o<e.length;o+=1){if(t=e[o],!this.multiple){this.items=[];break}-1<(n=u.inArray(t,this.items))&&this.items.splice(n,1)}this.refresh()}},{key:"all",value:function(){var e,t,n=this.$element.find("> tbody > tr"),o=[];for(t=0;t<n.length;t+=1)void 0!==(e=n.eq(t).attr("data-row-id"))&&o.push(e);this.add(o)}},{key:"clean",value:function(){var e,t,n=this.$element.find("> tbody > tr"),o=[];for(t=0;t<n.length;t+=1)void 0!==(e=n.eq(t).attr("data-row-id"))&&o.push(e);this.remove(o)}},{key:"clear",value:function(){this.items=[],this.refresh()}},{key:"getItems",value:function(){return this.items}},{key:"count",value:function(){return this.getItems().length}},{key:"getMaxSelection",value:function(){return this.maxSelection}},{key:"setMaxSelection",value:function(e){this.maxSelection=e}},{key:"refresh",value:function(){var e,t,n,o,r=u.Event("table-select-refreshed",{tableSelect:this}),i=this.$element.find("> tbody > tr"),l=!0;for(o=0;o<i.length;o+=1)void 0!==(e=i.eq(o).attr("data-row-id"))&&(t=i.eq(o).find("> "+this.rowSelector),n=this.has(e),l&&!n&&(l=!1),t.prop("checked",n));this.$count.empty(),this.count()<1?this.$count.addClass("not-selection"):(this.$count.text(this.count()+" "),this.$count.append(this.options.textSelection),this.$count.removeClass("not-selection")),this.$element.find(this.allSelector).prop("checked",l),this.$element.trigger(r)}},{key:"destroy",value:function(){this.clear(),this.refresh(),this.$wrapper.off("click.fxp.tableselect",this.options.clearSelector,d),this.$element.off("change.fxp.tableselect",this.options.allSelector,h).off("change.fxp.tableselect",this.options.rowSelector,p).off("table-pager-refreshed.fxp.tableselect",y),r(a(i.prototype),"destroy",this).call(this)}}]),i}();return b.defaultOptions={colSelectable:"table-selector",allSelector:"th[data-col-name=%COL_NAME%] input",rowSelector:"td[data-col-name=%COL_NAME%] input",countSelector:".table-select-count",clearSelector:".table-select-clear",textSelection:'<i class="fa fa-check-circle"></i>',maxSelection:0},function(t,a,c){var e=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,s=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"destroy",o=u.fn[t];u.fn[t]=function(){for(var r,e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,l=Array(1<t?t-1:0),n=1;n<t;n++)l[n-1]=arguments[n];return 1===(e=this.each(function(e,t){var n=u(t),o=n.data(a);o||(o=new c(t,"object"===f(i)?i:{}),n.data(a,o)),"string"==typeof i&&o&&(o[i]?r=(r=o[i].apply(o,l))!==o?r:void 0:o.constructor[i]&&(r=(r=o.constructor[i].apply(o,l))!==o?r:void 0),i===s&&n.removeData(a))})).length&&void 0!==r?r:e},u.fn[t].Constructor=c,e&&(u[t]=function(e){return u({})[t](e)}),u.fn[t].noConflict=function(){return u.fn[t]=o},null!==n&&u(window).on("load",function(){u(n).each(function(){var e=u(this);u.fn[t].call(e,e.data())})})}("tableSelect","fxp.tableselect",b,!0,'[data-table-select="true"]'),e.default=b,e}({},jQuery);
